<html>
  <head>
    <script type="text/javascript" src = "../javascript/Rhelpers.js"></script>
    <script type="text/javascript" src="../javascript/raphael.js"> </script>
    <script type="text/R">
      library(ggplot2)
      df <- data.frame(gp = factor(rep(letters[1:3], each = 10)),
                      y = rnorm(30))
	    library(plyr)
	    ds <- ddply(df, .(gp), summarise, mean = mean(y), sd = sd(y))
  
      rdev = raphaelDev("imagecont")
      myplot = ggplot() +
       geom_point(data = df, aes(x = gp, y = y)) +
       geom_point(data = ds, aes(x = gp, y = mean),
                             colour = 'red', size = 3) +
       geom_errorbar(data = ds, aes(x = gp, y = mean,
                         ymin = mean - sd, ymax = mean + sd),
                         colour = 'red', width = 0.4)
		  print(myplot)
    </script>
  </head>
  <body>
    <embed id="REngine" type="application/test-r" width="0" height="0"></embed>
    
    <div id="imagecont"></div>
  </body>
</html>
