<html>
  <head>
<!--
    <script type="text/javascript" src="http://github.com/DmitryBaranovskiy/raphael/raw/master/raphael.js"> </script>
-->    
<script type="text/javascript" src="../javascript/raphael.js"> </script>
<script type="text/javascript" src="../javascript/Rhelpers.js"> </script>

    <script type="text/R">

      RFun = function(dummy)
{
      call_JS_Method(ScriptCon, JS_GetGlobalObject(ScriptCon), "jsfun",list(), addRoot = FALSE)
}
      but = getElementById(ScriptCon, "fromR");
      args = list("RFun", but, "click", 1)
      call_JS_Method(ScriptCon, JS_GetGlobalObject(ScriptCon), "addREventHandler", args, addRoot = FALSE);

    </script>
    <script type="text/javascript">
 
      function jsfun()
      {
      alert("success");
      var div = document.getElementById("test1");
       div.innerHTML="Test Complete.";
      return 0;
      }

      function invokeRCallTest()
      {
      alert("invoking R call");
      var evt = document.createEvent("Events");
      evt.initEvent("RJSCallTest", true, false);
      document.dispatchEvent(evt);

      }
      
      function doAdd()
      {
      alert("hi. I'm doAdd");
      but= document.getElementById("withadd");
      var fun = function()
      {
      jsREventHandler("RFun", 1);
      }
      alert(but);
      but.addEventListener("click",fun, false, true);

      }
    </script>
  </head>
  <body onload="doAdd();">
    <div id="test1"> </div>
    <div id="test2"> </div>
    <div id="test3"> </div>
    <div id="test4"> </div>
    <input type="button" onclick="invokeRCallTest();">Unit Test</input>
    <input type="button" onclick="jsREventHandler('RFun', 1);">Production Code</input>
    <input type="button" id="withadd">Using addEventListener</input>
    <input type="button" id="fromR">Listener Added From R</input>
 
</body>
</html>
