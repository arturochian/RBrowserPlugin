<html>
  <head>
<!--
    <script type="text/javascript" src="http://github.com/DmitryBaranovskiy/raphael/raw/master/raphael.js"> </script>
    -->    
<!-- Combo-handled YUI CSS files: 
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/fonts/fonts-min.css" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/slider/assets/skins/sam/slider.css" />
-->
<style media="screen" type="text/css">

#slider-bg {
    position: absolute;
    cursor:default;
    
}
#slider-thumb {
    left: 0;
}
</style>
<!--<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/slider/assets/skins/sam/slider.css"> 
-->
<!-- Combo-handled YUI JS files: --> 
<!--
<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.9.0/build/yahoo-dom-event/yahoo-dom-event.js&2.9.0/build/dragdrop/dragdrop-min.js&2.9.0/build/slider/slider-min.js"></script> 
-->
<script type="text/javascript" src="./sliderFiles/yahoo-dom-event.js"></script>

<script type="text/javascript" src="./sliderFiles/dragdrop-min.js"></script>
<script type="text/javascript" src="./sliderFiles/slider-min.js"></script>

<script type="text/javascript" src="../javascript/raphael.js"> </script>
<script type="text/javascript" src="../javascript/R.js"> </script>
<script type="text/javascript" src="../javascript/Rscripthandler.js"> </script>

<script type="text/javascript">

var slider = YAHOO.widget.Slider.getHorizSlider("slider-bg", "slider-thumb", 0.25, 400);
var scale = 80;  
slider.animate=true;
slider.subscribe('change', function (newOffset) {
    YAHOO.log("Thumb is now " + newOffset + " pixels from its starting position");
 
    myElement.innerHTML = newOffset;
});
 
slider.subscribe("slideStart", function() {
    YAHOO.log("Slider is a go!");
 
    YAHOO.util.Dom.setStyle(myElement,'background-color','#9f9');
});
 
slider.subscribe("slideEnd", function() {
   
    
    // Move the thumb to an increment of 10 pixels
    // (see using ticks for a better option)
    var val = slider.getValue(),
        roundedVal = val - (val % 3);
 
    // Note: DO NOT attempt slider.setValue(x) here.
    // You CAN call setValue in a setTimeout from here, though.
    if (val !== roundedVal) {
setTimeout(function () { slider.setValue(roundedVal); },0);

netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
var out;
Rev.call1("doSlider", roundedVal / scale, out);
    }
});

</script>
 
<script type="text/R">
  library(RFirefox)
  canv = raphaelDev("canvas")
  x = seq(0,10, length.out=100) 
  y = rnorm(100, mean=sin(x), sd = abs(cos(x)) + .2)
  plot(x, y)

  doSlider = function(b)
  { 
    fit = ksmooth(x, y, bandwidth=b)
    pls = get("polylines", canv$storage)
    if(length(pls) > 1)
    {
      len = length(pls)
      away = pls[[len]]
      call_JS_Method(ScriptCon, away, "remove", character(), addRoot = FALSE)
      JS_RemoveRoot(ScriptCon, pls[[len]])
      assign("polylines", pls[-len], env=canv$storage)
    }
    lines(fit)
  }
</script>

  </head>
  <body>
	<h2>Slider Article </h2>
	<p>
	This article contains an interactive plot which is controlled with a slider. As the value of the slider is changed, the bandwidth of the fitted kernel estimator is changed. The fit is the recomputed.
</p>
    <div id="canvas" width="400" height="600" />
    <div id="test1"> </div>
    <div id="test2"> </div>
    <div id="test3"> </div>
    <div id="test4"> </div>
<div width="400">
  <div id="slider-bg" class="yui-h-slider" tabindex="-1" width="400"> 
    <div id="slider-thumb" class="yui-slider-thumb"><img src="thumb-n.gif"></div> 
  </div>
</div>

  </body>
